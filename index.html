
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>歴史クイズAI</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding:10px;
    color:#333;
}

/* コンテナ */
.container {
    background:white;
    border-radius:15px;
    box-shadow:0 15px 30px rgba(0,0,0,0.15);
    width:95%;
    max-width:480px;
    height:95vh;
    display:flex;
    flex-direction:column;
    padding:15px;
}

/* ヘッダー */
h1 {
    font-size:1.8rem;
    text-align:center;
    margin-bottom:5px;
}
.header-info {
    display:flex;
    flex-direction:column;
    align-items:center;
    margin-bottom:5px;
}
#era-display { font-size:1.2rem; font-weight:bold; margin-bottom:5px; }
#era-select { font-size:1rem; padding:6px 10px; border-radius:8px; border:1px solid #ddd; }

/* スコア */
.score {
    font-size:1rem;
    display:flex;
    justify-content:space-between;
    padding:0 5px;
    margin-bottom:5px;
}

/* クイズセクション */
.quiz-section {
    flex:1;
    display:flex;
    flex-direction:column;
}
.question {
    flex:1;
    font-size:1rem;
    padding:10px;
    border-radius:8px;
    border-left:4px solid #667eea;
    background:#f8f9fa;
    overflow-y:auto;
    margin-bottom:10px;
    line-height:1.4;
}
.answer-input {
    font-size:1rem;
    padding:10px;
    border-radius:8px;
    border:1px solid #ddd;
    width:100%;
    margin-bottom:10px;
}

/* ボタン */
.btn-group {
    display:flex;
    gap:8px;
    justify-content:center;
    flex-wrap:wrap;
}
.btn {
    flex:1;
    font-size:1rem;
    padding:10px 0;
    border-radius:20px;
    background:linear-gradient(135deg,#667eea,#764ba2);
    color:white;
    border:none;
    cursor:pointer;
}
.btn:hover {
    transform:translateY(-1px);
    box-shadow:0 5px 10px rgba(0,0,0,0.2);
}
.btn:disabled {
    opacity:0.6;
    cursor:not-allowed;
}

/* 結果表示 */
.result { font-size:0.95rem; padding:8px; border-radius:8px; display:none; overflow-wrap:break-word;}
.result.correct { background:#d4edda; color:#155724; border:1px solid #c3e6cb;}
.result.incorrect { background:#f8d7da; color:#721c24; border:1px solid #f5c6cb; }

/* ローディングスピナー */
.loading { display:inline-block; width:18px; height:18px; border:3px solid #f3f3f3; border-top:3px solid #667eea; border-radius:50%; animation:spin 1s linear infinite; margin-left:5px;}
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}

/* 最終結果 */
.final-result h1 { font-size:1.8rem; margin-bottom:10px; text-align:center; }
.final-result .score { font-size:1.5rem; margin:10px 0; text-align:center; }
.final-result .message { font-size:1rem; margin:10px 0; text-align:center; }
</style>
</head>
<body>
<div class="container">
    <h1>🏛️ 歴史クイズAI</h1>
    <div class="header-info">
        <div id="era-display">時代を読み込み中...</div>
        <select id="era-select" onchange="filterByEra()">
            <option value="all">全ての時代</option>
        </select>
    </div>
    <div class="score">
        <span>正解率: <span id="accuracy-rate">0% (0/0)</span></span>
        <span id="remaining-questions">残り0問</span>
    </div>
    <div class="quiz-section">
        <div class="question" id="question-text">問題を読み込み中...</div>
        <input type="text" id="user-answer" class="answer-input" placeholder="答えを入力してください" />
        <div class="btn-group">
            <button id="submit-btn" class="btn" onclick="submitAnswer()">回答する</button>
            <button id="next-btn" class="btn" onclick="nextQuestion()" style="display:none;">次の問題</button>
        </div>
    </div>
    <div id="result" class="result"></div>
</div>

<script>
// ここに以前のJSコードをそのまま貼り付けて動作
</script>
</body>
</html>
